<?xml version="1.0" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="ja" xml:lang="ja">
	<head>
		<meta charset="UTF-8" />
		<link rel="stylesheet" type="text/css" href="cheetsheet.css" />
		<title>git cheat sheet by Team "Subversion at Work"</title>
	</head>
	<body>

<pre>
■ リポジトリを作成する
◯ 既存のファイルを新しいリポジトリへ登録する
cd /path/to/project
git init
git add

◯ 既存のリポジトリから作成する
git clone ~/existring/repo ~/new/repo
git clone git://host.org/project.git
git clone ssh://you@host.org/proj.git

■リポジトリの状態を表示
◯ 作業ディレクトリで変更したファイルを表示する
git status
◯ 追跡対象のファイルに対する変更を表示する
git diff
◯ id間の差分をする
git diff $id1 $id2
  $id1と$id2 は コミット単位に割り当てられるsha1の値
  一意に判断できれば、途中でもよい
◯ 変更履歴を表示する
git log
◯ ファイルの変更履歴を差分付きで表示する
git log -p $file $dir/ec/tory/
◯ ファイルのどこを誰がいつ変更したかを表示する
git blame $file
◯ $idのコミット内容を表示する
git show $id
◯ 特定$idのファイル$fileを表示
git show $id:$file
◯ ローカルブランチをすべて表示する
git branch

</pre>

<pre>
■概念
○Gitの基礎
 master : デフォルトの開発ブランチ
 origin : デフォルトの上流ブランチ
 HEAD   : 現在のブランチ
 HEAD^  : HEADの親
 HEAD-4 : HEADの祖父母の祖父母
○取り消し
 git reset --hard
 最後にコミットした状態に戻す
 git revert HEAD
 最新のコミットを取り消す
 git revert $id
 指定したコミットを取り消す
 git commit -a --amend
 最新のコミットを修正する
 git commit -a --amend
 ファイル$fileのバージョンを$idをチェックアウトする
 git checkout $id $file
○ブランチ
 git checkout $id
 ブランチ$idに切り替える
 git checkout $branch2
 git merge $branch1
 ブランチ$branch1を$branch2にマージする
 git branch $branch
 HEADから$branchという名前のブランチを作成する
 git checkout -b $new_branch $other
 ブランチ$otherからブランチ$new_branchを作成し、$new_branchに切り替える
 git branch -d $branch
 ブランチ$branchを削除する
</pre>

<pre>
■リポジトリを更新する。
◯originから最新の変更を取得する。
 git fetch (マージはしない）

◯originから最新の変更を取得する。
 git pull (取得した後、マージする）

◯他人から届いたパッチを当てる
 git am -3 patch.mbox
（競合発生時は、git am -resolvedで解消する）
<br>
■役に立つコマンド
◯リグレッションを見つける
 git bisect start（開始）
 git bisect good $id（$idは最後に動作していないバージョン）
 git bisect bad $id（$idは動作しないバージョン）
 git bisect bad/good（badかgoodか、マーク）
 git bisect visualize（gitkを起動して、bisectとマーク）
 git bisect reset（完了したとき）

◯エラーチェックをして、リポジトリをきれいにする
 git fsck
 git gc -prune

◯作業ディレクトリでfoo()を検索する
 git grep "foo()"
</pre>

<pre>

<div>
<h3>公開</h3>
<p>ローカルの変更をすべてコミットする</p>
<code>git commit -a</code>
<p>他の開発者向けにパッチを用意する</p>
<code>git format-patch origin</code>
<p>変更をoriginに反映する</p>
<code>git push</code>
<p>バージョンやマイルストーンのタグを付ける</p>
<code>git tag v1.0</code>
</div>

<div>
<h3>マージの競合を解消</h3>
<p>マージの競合を確認する</p>
<code>get diff</code>
<code>get diff -base $file</code>
<code>get diff -ours $file</code>
<code>get diff -theirs $file</code>

<p>競合しているバッチを捨てる</p>
<code>git reset -hard</code>
<code>git rebase -skip</code>

<p>競合を解消してマージする</p>
<code>git add $conlifting_file</code>
<code>git rebase -continue</code>

</div>

</pre>

	</body>
</html>
